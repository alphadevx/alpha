language: php

php:
 - '7.1.7'

services:
 - memcached
 - redis

before_install:
 - echo "extension = memcached.so" >> ~/.phpenv/versions/7.1.7/etc/php.ini
 - echo "max_execution_time = 600" >> ~/.phpenv/versions/7.1.7/etc/php.ini

before_script:
 - wget http://getcomposer.org/composer.phar
 - php composer.phar install --dev --no-interaction
 - phpenv config-add php.ini
 - yes '' | pecl install -f apcu-5.1.7

script:
 - vendor/bin/phpunit

after_script:
 - vendor/bin/coveralls
